#### æ•´ä¸ªæµç¨‹æ˜¯ä»€ä¹ˆ
å¯¼å…¥æµ‹è¯•ç”¨ä¾‹(ImportTestCase) -> æµ‹è¯•ç”¨ä¾‹åˆ†ç±»(TestRepository + Database) -> åˆ›å»ºæµ‹è¯•æ‰§è¡Œjira(TestExecution create_test_executions) -> æ‰§è¡Œæµ‹è¯•(TestExecution TestRunner) -> æµ‹è¯•ç»“æœå¯¼å…¥(ImportTestResult) -> åˆ†ææµ‹è¯•ç»“æœ(TestExecution Analysis) -> ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š(TestExecution Visualization)



test_db çš„ä¼ å…¥ç‚¹ï¼š
åœ¨ test-management/ImportTestCase.py ä¸­ï¼Œtest_db æ˜¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥çš„


#### å¦‚ä½•å¯¼å…¥æµ‹è¯•ç”¨ä¾‹
å½“æˆ‘ä»¬åˆå¹¶æµ‹è¯•ç”¨ä¾‹çš„ MR åï¼Œæµ‹è¯•ç”¨ä¾‹å°†è¢«è‡ªåŠ¨æ›´æ–°åˆ° Jira é¡¹ç›®ä¸­ã€‚

```bash
python ImportTestCase.py TMDP auto_test_script -d /Users/test/auto_test_script/TestCaseFiles/TC.sqlite -r 4049def5
```

ä¸Šè¿°å‘½ä»¤å°†ä¼šæŠŠæµ‹è¯•ç”¨ä¾‹å¯¼å…¥åˆ° TMDP é¡¹ç›®ä¸­ã€‚æˆ‘ä»¬éœ€è¦å¯¼å…¥çš„æµ‹è¯•ç”¨ä¾‹æ˜¯åŸºäº auto\_test\_script æ¥å®ç°çš„ã€‚æµ‹è¯•ç”¨ä¾‹æ•°æ®åº“çš„è·¯å¾„æ˜¯ `/Users/test/auto_test_script/TestCaseFiles/TC.sqlite`ï¼Œæµ‹è¯•ç”¨ä¾‹ï¼ˆä»“åº“ï¼‰ç‰ˆæœ¬ä¸º 4049def5ã€‚

`ImportTestCase.py` è„šæœ¬ä¸­è¿™å‡ ä¸ªå‘½ä»¤è¡Œå‚æ•°æ‰€ä»£è¡¨çš„å«ä¹‰ï¼š
1.  **`jira_project` (ä½ç½®å‚æ•°)**
    *   **ä»£è¡¨**: Jira æµ‹è¯•é¡¹ç›®åç§°ã€‚
    *   **ä½œç”¨**: æŒ‡å®šæµ‹è¯•ç”¨ä¾‹è¦å¯¼å…¥åˆ°å“ªä¸ª Jira é¡¹ç›®ä¸­ã€‚è¿™æ˜¯å¿…éœ€å‚æ•°ã€‚
    *   **ç¤ºä¾‹**: `my_project`

2.  **`test_fw` (ä½ç½®å‚æ•°)**
    *   **ä»£è¡¨**: æµ‹è¯•æ¡†æ¶ç±»å‹ã€‚
    *   **ä½œç”¨**: æŒ‡å®šè¦ä»å“ªç§æµ‹è¯•æ¡†æ¶æˆ–æ•°æ®æºå¯¼å…¥æµ‹è¯•ç”¨ä¾‹ã€‚è¿™å†³å®šäº†è„šæœ¬ä¼šä½¿ç”¨ `ImportTestCase` æ¨¡å—ä¸‹çš„å“ªä¸ªå…·ä½“å­ç±»æ¥å¤„ç†æ•°æ®ã€‚
    *   **å¯èƒ½çš„å€¼**: `auto_test_script`, `tiny_test_fw`, `unity`, `coexist_test`, `wvt`, `from_xml` (å®é™…ä¸Šæ˜¯ `cta` å¯¹åº” `from_xml` æ ¼å¼), `pts`, `from_yaml`ã€‚
    *   **ç¤ºä¾‹**: `auto_test_script`, `from_yaml`

3.  **`--db_path` æˆ– `-d`**
    *   **ä»£è¡¨**: åŒ…å«æµ‹è¯•æ•°æ®åº“ï¼ˆæˆ–æµ‹è¯•æ•°æ®æ–‡ä»¶ï¼‰çš„è·¯å¾„ã€‚
    *   **ä½œç”¨**: æä¾›åŸå§‹æµ‹è¯•æ•°æ®æºçš„ä½ç½®ã€‚æ ¹æ® `test_fw` çš„ä¸åŒï¼Œè¿™ä¸ªè·¯å¾„å¯èƒ½æŒ‡å‘ï¼š
        *   `.sqlite` æ–‡ä»¶ï¼ˆä¾‹å¦‚ `auto_test_script` æˆ– `tiny_test_fw` å¯èƒ½ä½¿ç”¨ï¼‰ã€‚
        *   `.yml` æ–‡ä»¶ï¼ˆä¾‹å¦‚ `from_yaml`ï¼‰ã€‚
        *   `.xml` æ–‡ä»¶ï¼ˆä¾‹å¦‚ `cta` å¯èƒ½ä½¿ç”¨ JUnit XMLï¼‰ã€‚
    *   **`nargs='+'`**: è¡¨ç¤ºå¯ä»¥æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªè·¯å¾„ã€‚å¦‚æœæµ‹è¯•æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ï¼Œå¯ä»¥å¤šæ¬¡ä½¿ç”¨æ­¤å‚æ•°ã€‚
    *   **ç¤ºä¾‹**: `--db_path /path/to/test.sqlite /path/to/another.yml`

4.  **`--extra_labels` æˆ– `-l`**
    *   **ä»£è¡¨**: é¢å¤–çš„æ ‡ç­¾ã€‚
    *   **ä½œç”¨**: è¿™äº›æ ‡ç­¾ä¼šè¢«æ·»åŠ åˆ°ä»å½“å‰æºå¯¼å…¥çš„æµ‹è¯•ç”¨ä¾‹çš„ Jira Issue ä¸­ã€‚è¿™æœ‰åŠ©äºå¯¹æµ‹è¯•ç”¨ä¾‹è¿›è¡Œåˆ†ç±»æˆ–æ ‡è¯†å…¶æ¥æºã€‚
    *   **`nargs='+'`**: å¯ä»¥æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾ã€‚
    *   **ç¤ºä¾‹**: `--extra_labels Regression SmokeTest`

5.  **`--revision` æˆ– `-r`**
    *   **ä»£è¡¨**: commitã€‚
    *   **ä½œç”¨**: ç”¨äºæŒ‡å®šå½“å‰æµ‹è¯•ç”¨ä¾‹æ‰€å¯¹åº”çš„è½¯ä»¶ç‰ˆæœ¬æˆ–ä¿®è®¢å·ã€‚è¿™å¯¹äºè·Ÿè¸ªæµ‹è¯•ç”¨ä¾‹åœ¨ä¸åŒç‰ˆæœ¬é—´çš„å˜åŒ–éå¸¸æœ‰ç”¨ã€‚
    *   **é»˜è®¤å€¼**: `None` (å¯é€‰å‚æ•°)ã€‚
    *   **ç¤ºä¾‹**: `--revision v1.2.3`

6.  **`--save_to_csv`**
    *   **ä»£è¡¨**: æ˜¯å¦å°†æ•°æ®ä¿å­˜åˆ° CSV æ–‡ä»¶è€Œä¸æ˜¯æäº¤åˆ° Jiraã€‚
    *   **ä½œç”¨**: å¦‚æœæ­¤æ ‡å¿—ä¸º `True`ï¼Œè„šæœ¬ä¼šå°†å¯¼å…¥çš„æµ‹è¯•ç”¨ä¾‹æ•°æ®ç”Ÿæˆä¸º CSV æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å®é™…åˆ›å»ºæˆ–æ›´æ–° Jira Issueã€‚è¿™å¯¹äºè°ƒè¯•ã€æ•°æ®æ£€æŸ¥æˆ–ç¦»çº¿åˆ†æéå¸¸æœ‰ç”¨ã€‚
    *   **ç±»å‹**: `action='store_true'` æ„å‘³ç€å½“æŒ‡å®šæ­¤å‚æ•°æ—¶ï¼Œå…¶å€¼ä¸º `True`ã€‚
    *   **é»˜è®¤å€¼**: `False`ã€‚

7.  **`--deprecate_not_imported_case`**
    *   **ä»£è¡¨**: æ˜¯å¦åºŸå¼ƒæœªå¯¼å…¥çš„æµ‹è¯•ç”¨ä¾‹ã€‚
    *   **ä½œç”¨**: å¦‚æœè®¾ç½®ä¸º `True`ï¼Œå¹¶ä¸”é…åˆ `--issue_filter` ä½¿ç”¨ï¼Œè„šæœ¬ä¼šæŸ¥æ‰¾ Jira ä¸­ä¸å½“å‰å¯¼å…¥æºç›¸å…³çš„ã€ä½†åœ¨æ­¤æ¬¡å¯¼å…¥ä¸­æ²¡æœ‰å‡ºç°çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶å°†å…¶çŠ¶æ€æ ‡è®°ä¸ºâ€œDeprecatedâ€ï¼ˆå·²åºŸå¼ƒï¼‰ã€‚è¿™æœ‰åŠ©äºä¿æŒ Jira ä¸­æµ‹è¯•ç”¨ä¾‹çš„æœ€æ–°çŠ¶æ€ï¼Œç§»é™¤ä¸å†æ´»è·ƒçš„ç”¨ä¾‹ã€‚
    *   **ç±»å‹**: `Utils.str2bool` æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹è½¬æ¢å‡½æ•°ï¼Œå¯ä»¥å°†å­—ç¬¦ä¸²ï¼ˆå¦‚ 'true', 'false'ï¼‰è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚
    *   **é»˜è®¤å€¼**: `None` (ç”± `need_deprecate_not_imported_cases` å‡½æ•°æ ¹æ®å…¶ä»–å‚æ•°å†³å®šæœ€ç»ˆå€¼)ã€‚

8.  **`--issue_filter`**
    *   **ä»£è¡¨**: ä¸€ä¸ªè¿‡æ»¤å­—ç¬¦ä¸²ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ ‡ç­¾ã€‚
    *   **ä½œç”¨**: ä¸»è¦ä¸ `--deprecate_not_imported_case` å‚æ•°ç»“åˆä½¿ç”¨ã€‚å½“ä»å¤šä¸ªä»£ç åº“å¯¼å…¥æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå®ƒç”¨äºæ ‡è¯†å“ªäº›æµ‹è¯•ç”¨ä¾‹æ˜¯ä»â€œå½“å‰â€ä»£ç åº“å¯¼å…¥çš„ã€‚è¿™æ ·ï¼Œåœ¨åºŸå¼ƒæ“ä½œæ—¶ï¼Œè„šæœ¬åªä¼šåœ¨ä¸è¯¥è¿‡æ»¤å™¨åŒ¹é…çš„ Jira Issue ä¸­æŸ¥æ‰¾è¦åºŸå¼ƒçš„ç”¨ä¾‹ï¼Œé¿å…è¯¯åºŸå¼ƒæ¥è‡ªå…¶ä»–ä»£ç åº“çš„æµ‹è¯•ç”¨ä¾‹ã€‚
    *   **é»˜è®¤å€¼**: `None` (å¯é€‰å‚æ•°)ã€‚
    *   **ç¤ºä¾‹**: `--issue_filter MyRepoLabel`

9.  **`--preview`**
    *   **ä»£è¡¨**: é¢„è§ˆæ¨¡å¼ã€‚
    *   **ä½œç”¨**: å¦‚æœæ­¤æ ‡å¿—ä¸º `True`ï¼Œè„šæœ¬å°†ä»¥é¢„è§ˆæ¨¡å¼è¿è¡Œã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼š
        *   æ–°åˆ›å»ºçš„æµ‹è¯•ç”¨ä¾‹å’Œå‰ç½®æ¡ä»¶ä¼šè¢«è®¾ç½®ä¸ºâ€œé¢„è§ˆâ€çŠ¶æ€ã€‚
        *   è„šæœ¬ä¸ä¼šä¿®æ”¹ä»»ä½•å·²ç»å­˜åœ¨äº Jira ä¸­çš„ Issueã€‚
        *   è¿™å¯¹äºåœ¨å®é™…ä¿®æ”¹ Jira ä¹‹å‰æ£€æŸ¥å¯¼å…¥ç»“æœéå¸¸æœ‰ç”¨ã€‚
    *   **ç±»å‹**: `action='store_true'` æ„å‘³ç€å½“æŒ‡å®šæ­¤å‚æ•°æ—¶ï¼Œå…¶å€¼ä¸º `True`ã€‚
    *   **é»˜è®¤å€¼**: `False`ã€‚

#### ğŸ’•ç–‘é—®:
- [x] TMDP ç­‰4ä¸ªprojectåˆ†åˆ«å•¥æ„æ€ï¼Ÿç”¨äºä»€ä¹ˆ
> TEST_CASE_CLS_MAP = {
    'TIDF': TestCaseTIDF,
    'TAT': TestCaseTAT,
    'TMDP': TestCaseTMDP,
    'TIDF2026': TestCaseTIDF,
}
    jiahuiåªç”¨åˆ°è¿‡TIDFï¼Œå…¶ä»–å…ˆä¸ç®¡äº†
- [x] è¿è¡Œ ImportTestCase.py --previewä¸ºFalse --save_to_csvä¸ºTrue ä¼šå½±å“jiraå— 
    ğŸ’ä¸ä¼š
